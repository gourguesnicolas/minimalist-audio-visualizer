<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Minimalist Music Player</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸµ</text></svg>"
    />
  </head>
  <body>
    <input type="file" id="fileInput" accept="audio/*" />

    <!-- Bouton toggle DÃ‰PLACÃ‰ EN DEHORS du panneau -->
    <button id="togglePanel">â˜°</button>

    <!-- Bouton d'export -->
    <button id="exportButton" class="export-btn" style="display: none">
      ğŸ“¹ Exporter vidÃ©o
    </button>

    <!-- NOUVEAU: Bouton pause/play -->
    <button
      id="playPauseButton"
      class="play-pause-btn"
      style="display: flex; opacity: 0.3"
    >
      â–¶ï¸
    </button>

    <!-- Message de succÃ¨s -->
    <div id="successMessage" class="success-message">
      âœ… VidÃ©o exportÃ©e avec succÃ¨s!
    </div>

    <!-- Popup d'export -->
    <div id="exportPopup" class="popup-overlay">
      <div class="popup-content">
        <div class="popup-header">
          <h2>ğŸ“¹ Exporter la vidÃ©o</h2>
          <button id="closePopup" class="close-btn">âœ•</button>
        </div>

        <div class="popup-body">
          <div class="export-option fade-in-up">
            <label>
              <input type="radio" name="exportType" value="full" />
              Exporter la musique complÃ¨te
            </label>
            <p class="duration-info" id="fullDuration">DurÃ©e: --:--</p>
          </div>

          <!-- Section avec slider double -->
          <div class="export-option fade-in-up">
            <label>
              <input type="radio" name="exportType" value="custom" checked />
              Exporter un extrait personnalisÃ©
            </label>

            <!-- Container du range slider simplifiÃ© -->
            <div
              class="range-container"
              id="customRangeInputs"
              style="display: block"
            >
              <div class="range-wrapper">
                <div class="range-track"></div>
                <div class="range-fill" id="rangeFill"></div>
                <input
                  type="range"
                  id="rangeMin"
                  class="range-slider"
                  min="0"
                  max="100"
                  value="0"
                />
                <input
                  type="range"
                  id="rangeMax"
                  class="range-slider"
                  min="0"
                  max="100"
                  value="100"
                />
                <div class="range-labels">
                  <span class="time-label" id="labelMin">00:00</span>
                  <span class="time-label" id="labelMax">03:15</span>
                </div>
              </div>
              <div class="duration-display" id="selectedDuration">
                DurÃ©e sÃ©lectionnÃ©e: 03:15
              </div>
            </div>
          </div>

          <div class="format-section fade-in-up">
            <label>ğŸ“± Format de la vidÃ©o:</label>
            <select id="formatSelect">
              <option value="landscape" selected>
                ğŸ–¥ï¸ Paysage (16:9) - YouTube/Desktop
              </option>
              <option value="portrait">
                ğŸ“± Portrait (9:16) - Reels/Stories
              </option>
              <option value="square">â¬œ CarrÃ© (1:1) - Instagram Post</option>
            </select>
          </div>

          <div class="quality-section fade-in-up">
            <label>ğŸ¬ QualitÃ© vidÃ©o:</label>
            <select id="qualitySelect">
              <option value="1080" selected>ğŸ¬ Full HD (1080p)</option>
              <option value="720">ğŸ¥ HD (720p)</option>
              <option value="480">ğŸ“± SD (480p)</option>
            </select>
          </div>

          <div class="export-actions fade-in-up">
            <button id="exportVideoBtn" class="export-action-btn primary">
              ğŸ“¥ TÃ©lÃ©charger
            </button>
            <button
              id="shareTwitterBtn"
              class="export-action-btn social twitter"
            >
              ğŸ¦ Twitter
            </button>
            <button
              id="shareInstagramBtn"
              class="export-action-btn social instagram"
            >
              ğŸ“· Instagram
            </button>
          </div>

          <div
            id="exportProgress"
            class="progress-container"
            style="display: none"
          >
            <div class="progress-bar">
              <div id="progressFill" class="progress-fill"></div>
            </div>
            <p id="progressText">PrÃ©paration de l'export...</p>
            <button id="cancelExportBtn" class="cancel-export-btn">
              âœ– Annuler l'export
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Panneau de contrÃ´le - SUPPRESSION du bouton toggle de l'intÃ©rieur -->
    <div id="controlPanel">
      <!-- <button id="togglePanel">â˜°</button> â† SUPPRIMÃ‰ -->
      <h2>âœ¨ Effets</h2>
      <label class="fade-in-up">
        <input type="checkbox" id="rainbowEffect" />
        ğŸŒˆ Couleurs arc-en-ciel
      </label>
      <label class="fade-in-up">
        <input type="checkbox" id="glowEffect" />
        âœ¨ Halo lumineux
      </label>
      <label class="fade-in-up">
        <input type="checkbox" id="particlesEffect" />
        ğŸ† Particules
      </label>

      <label class="fade-in-up">
        ğŸ”„ Taille maximale :
        <input type="range" id="maxRadius" min="100" max="400" value="200" />
      </label>

      <label class="fade-in-up">
        âš¡ Vitesse rotation :
        <input
          type="range"
          id="rotationSpeed"
          min="0"
          max="0.1"
          step="0.005"
          value="0.02"
        />
      </label>

      <h2>ğŸ¨ Formes</h2>
      <select id="shapeSelect" class="fade-in-up">
        <option value="circle">â­• Cercle</option>
        <option value="square">â¬œ CarrÃ©</option>
        <option value="triangle">ğŸ”º Triangle</option>
        <option value="hexagon">â¬Ÿ Hexagone</option>
        <option value="star">â­ Ã‰toile</option>
      </select>
    </div>

    <canvas id="canvas"></canvas>
    <script src="script.js"></script>
  </body>
</html>
